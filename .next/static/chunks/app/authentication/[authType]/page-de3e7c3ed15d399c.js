(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{1135:function(e,t,s){"use strict";s.r(t);var r,a,n,i=s(4410);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}t.default=function(e){return i.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,viewBox:"0 0 512.001 512.001"},e),r||(r=i.createElement("path",{d:"M489.371 21.731c-12.173 4.038-112.262 37.77-153.011 68.562-52.018-19.798-109.342-19.564-160.721 0-40.75-30.792-140.838-64.525-153.011-68.562C10.48 17.697-1.668 27.913.189 40.562c6.506 44.303 22.818 136.17 47.658 173.094a225.7 225.7 0 0 0-17.75 87.806 17.21 17.21 0 0 0 6.244 13.263L245.039 487.22a17.21 17.21 0 0 0 21.924 0l208.698-172.495a17.21 17.21 0 0 0 6.244-13.263c0-30.763-6.24-60.523-17.751-87.806 24.916-37.037 41.226-129.292 47.658-173.094 1.861-12.69-10.334-22.849-22.441-18.831m-94.975 147.393C328.746 200.647 280.166 246.09 256 298.192c-24.166-52.102-72.746-97.545-138.395-129.068 75.265-78.678 201.092-79.131 276.791 0M38.736 63.802c34.23 12.487 75.224 29.326 100.896 43.978-28.854 17.338-53.548 41.003-72.192 69.213-10.049-24.35-20.363-64.742-28.704-113.191m217.263 387.831L64.673 293.497c1.45-35.045 12.46-68.284 30.948-96.645 63.389 28.785 109.525 70.923 130.514 118.806h-6.431c-14.701 0-22.648 17.339-13.006 28.472l36.295 41.901c6.863 7.925 19.162 7.908 26.011 0l36.294-41.901c9.617-11.103 1.731-28.472-13.006-28.472h-6.429c20.988-47.883 67.125-90.022 130.516-118.807 18.489 28.359 29.496 61.6 30.946 96.646zm188.561-274.64c-18.542-28.057-43.221-51.803-72.193-69.212 25.672-14.652 66.667-31.491 100.898-43.978-8.343 48.45-18.655 88.839-28.705 113.19"})),a||(a=i.createElement("circle",{cx:137.387,cy:260.997,r:22.762})),n||(n=i.createElement("circle",{cx:375.316,cy:260.997,r:22.762})))}},7636:function(e,t,s){Promise.resolve().then(s.bind(s,9262))},9262:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),a=s(39),n=s.n(a),i=s(7138),o=s(6800),c=s.n(o),u=s(2265),p=s(6463),d=s(3375),h=s(3424),l=s(7438),m=s(4172),w=s(8632);let g=e=>(0,r.jsx)(m.Z,{open:e.open,autoHideDuration:4500,onClose:e.handleClose,children:(0,r.jsx)(w.Z,{severity:e.severity,variant:"filled",sx:{width:"100%"},children:e.text})});var x=e=>{let{params:t}=e,s=(0,p.useRouter)(),[a,o]=(0,u.useState)({open:!1,text:"",severity:"error"}),[m,w]=(0,u.useState)(!1),[x,y]=(0,u.useState)({username:"",password:"",repassword:"",rememberMe:!1}),f="login"===t.authType?"Авторизация":"Регистрация",b=e=>{"checkbox"===e.target.type?y({...x,[e.target.name]:e.target.checked}):y({...x,[e.target.name]:e.target.value})},j=async e=>{e.preventDefault();let r="login"===t.authType?{username:x.username,password:x.password,rememberMe:x.rememberMe}:{username:x.username,password:x.password,repassword:x.repassword};if("login"===t.authType){let e=await (0,l.x4)(r);!0===e.success?(r.rememberMe&&(0,d.setCookie)("remember_user","true"),(0,d.setCookie)("username",e.username),s.push("/")):o({open:!0,text:e.message,severity:"error"})}if("register"===t.authType){let e=await (0,l.z2)(r);if(!0===e.success){let e={username:r.username,password:r.password},t=await (0,l.x4)(e);!0===t.success?((0,d.setCookie)("username",t.username),s.push("/")):(o({open:!0,text:t.message,severity:"error"}),s.push("/authentication/login"))}else o({open:!0,text:e.message,severity:"error"})}y({username:"",password:"",repassword:"",rememberMe:!1})},v={hasNumber:null!==x.password.match(/\d+/),hasUppercaseLetter:null!==x.password.match(/[A-Z]/),hasSpecialSymbol:null!==x.password.match(/[!@#$%^&*№_]/g),isPasswordNotEmpty:!!x.password,isRepasswordNotEmpty:!!x.repassword,isUsernameNotEmpty:!!x.username,isMatchingPasswords:x.password===x.repassword};return((0,u.useEffect)(()=>{w(!0)},[]),m)?"login"!==t.authType&&"register"!==t.authType?(0,p.redirect)("/"):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c()(n().auth_wrap,{[n().bg1]:"login"===t.authType},{[n().bg2]:"register"===t.authType}),children:[(0,r.jsx)(h.N,{}),(0,r.jsx)("div",{"data-form-wrapper":!0,children:(0,r.jsxs)("form",{onSubmit:e=>j(e),children:[(0,r.jsx)("h1",{children:f}),(0,r.jsx)("input",{value:x.username,name:"username",type:"text",placeholder:"Имя пользователя",onChange:e=>b(e)}),(0,r.jsx)("input",{value:x.password,name:"password",type:"password",placeholder:"Пароль",onChange:e=>b(e)}),"register"===t.authType&&(0,r.jsx)("input",{value:x.repassword,name:"repassword",type:"password",placeholder:"Повторите пароль",onChange:e=>b(e)}),"login"===t.authType&&(0,r.jsxs)("div",{"data-options":!0,children:[(0,r.jsx)("div",{"data-remember-me":!0,className:n().checkbox_wrap,children:(0,r.jsxs)("label",{className:n().checkbox,children:[(0,r.jsx)("input",{checked:x.rememberMe,name:"rememberMe",type:"checkbox",hidden:!0,onChange:e=>b(e)}),(0,r.jsx)("span",{"data-square":!0}),(0,r.jsx)("p",{children:"Запомнить это устройство"})]})}),(0,r.jsx)("p",{children:"Забыли пароль?"})]}),"register"===t.authType&&(0,r.jsxs)("div",{"data-conditions":!0,children:[(0,r.jsx)("p",{children:"Пароль должен:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{"data-checked":v.hasUppercaseLetter,children:" - содержать хотя бы одну заглавную букву"}),(0,r.jsx)("li",{"data-checked":v.hasNumber,children:" - содержать хотя бы одну цифру"}),(0,r.jsx)("li",{"data-checked":v.hasSpecialSymbol,children:" - содержать хотя бы один специальный символ (@, №, # и подобные)"}),(0,r.jsx)("li",{"data-checked":v.isMatchingPasswords&&v.isPasswordNotEmpty&&v.isRepasswordNotEmpty,children:" - совпадать с повторным вводом"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:!(v.isPasswordNotEmpty&&v.isRepasswordNotEmpty&&v.isUsernameNotEmpty&&v.isMatchingPasswords)&&"register"===t.authType||!(v.isUsernameNotEmpty&&v.isPasswordNotEmpty)&&"login"===t.authType,children:"register"===t.authType?"Зарегистрироваться":"Войти в аккаунт"}),(0,r.jsxs)("div",{"data-helper":!0,children:[(0,r.jsx)("p",{children:"register"===t.authType?"Уже есть аккаунт?":"Нет учетной записи?"}),(0,r.jsx)(i.default,{href:"login"===t.authType?"/authentication/register":"/authentication/login",children:"register"===t.authType?"Авторизуйтесь":"Зарегистрируйтесь"})]})]})})]}),(0,r.jsx)(g,{open:a.open,text:a.text,severity:a.severity,handleClose:(e,t)=>{"clickaway"!==t&&o({...a,open:!1})}})]}):null}},3424:function(e,t,s){"use strict";s.d(t,{N:function(){return n}});var r=s(7437),a=s(1135);let n=()=>(0,r.jsx)(a.default,{})},7438:function(e,t,s){"use strict";s.d(t,{kS:function(){return n},x4:function(){return a},z2:function(){return i}});var r=s(8472);async function a(e){let t={username:e.username,password:e.password};return(await r.Z.post("http://127.0.0.1:8080/api/auth/login",t)).data}async function n(e){return(await r.Z.delete("http://127.0.0.1:8080/api/auth"+"/".concat(e,"/logout"))).data}async function i(e){let t={username:e.username,password:e.password};return(await r.Z.post("http://127.0.0.1:8080/api/auth/register",t)).data}},39:function(e){e.exports={auth_wrap:"Authentication_auth_wrap__1EB2n",bg1:"Authentication_bg1__Up7bC",bg2:"Authentication_bg2__hthmR",showup:"Authentication_showup__BPX2r"}}},function(e){e.O(0,[724,39,297,38,971,23,744],function(){return e(e.s=7636)}),_N_E=e.O()}]);